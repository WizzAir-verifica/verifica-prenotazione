<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verifica Prenotazione</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background: #D3007F;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}
.card{
    background:white;
    width:92%;
    max-width:420px;
    padding:25px;
    border-radius:12px;
    box-shadow:0 20px 40px rgba(0,0,0,.35);
    text-align:center;
}
.logo{
    font-size:24px;
    font-weight:bold;
    color:#2a5298;
}
.subtitle{
    font-size:13px;
    color:#777;
    margin-bottom:20px;
}
input{
    width:100%;
    padding:12px;
    font-size:15px;
    margin-top:10px;
}
button{
    width:100%;
    margin-top:15px;
    padding:12px;
    font-size:15px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.primary{background:#2a5298;color:white;}
.danger{background:#c0392b;color:white;}
.secondary{background:#555;color:white;}
.hidden{display:none;}
.error{color:#c0392b;font-weight:bold;margin-top:15px;}
.ok{color:#27ae60;font-weight:bold;margin-top:15px;}
.small{font-size:12px;color:#777;margin-top:10px;}
</style>
</head>

<body>

<div class="card">

<!-- STEP 1 -->
<div id="step1">
    <div class="logo">WizzAirMalta</div>
    <div class="subtitle">Sistema automatico di verifica prenotazioni</div>
    <input id="code" placeholder="Codice prenotazione">
    <button class="primary" onclick="verificaCodice()">Verifica</button>
</div>

<!-- STEP OK -->
<div id="okStep" class="hidden">
    <div class="ok">
        ‚úÖ PRENOTAZIONE CONFERMATA<br><br>
        Il passeggero √® regolarmente incluso nel volo.
    </div>
</div>

<!-- STEP BLOCCO -->
<div id="blockStep" class="hidden">
    <div class="error">
        ‚ö†Ô∏è PRENOTAZIONE ANNULLATA<br><br>
        Il posto √® stato rimosso per riorganizzazione operativa.
    </div>
    <button class="danger" onclick="startCheck()">Richiedi rimborso</button>
    <button class="secondary" onclick="startCheck()">Cambia volo senza costi</button>
</div>

<!-- STEP VERIFICA -->
<div id="checkStep" class="hidden">
    <p><b>Verifica di sicurezza</b></p>
    <p id="domanda"></p>
    <input id="risposta" placeholder="Inserisci la risposta">
    <button class="primary" onclick="verificaRisposta()">Conferma</button>
    <div class="small" id="tentativi"></div>
</div>

<!-- STEP FINALE -->
<div id="finalStep" class="hidden">
    <div class="ok">‚úÖ VERIFICA COMPLETATA</div>
    <p>Contatta l‚Äôassistenza clienti:</p>
    <p style="font-size:20px;font-weight:bold;">üìû 3703661965
    <div class="small">Numero valido solo per questa prenotazione</div>
</div>

</div>

<script>
const codiceBloccato = "BUCAREST-NO"; // ‚Üê CAMBIA QUI

let tentativo = 0;
let domandaCorrente = null;

// domande realistiche
const domande = [
    { q: "Quanto fa 7 √ó 8 ?", a: "56" },
    { q: "Capitale della Romania?", a: "bucarest" },
    { q: "Quanto fa (10 + 5) √ó 2 ?", a: "30" },
    { q: "In che continente si trova l‚ÄôItalia?", a: "europa" },
    { q: "Quanto fa 100 √∑ 4 ?", a: "25" }
];

function verificaCodice(){
    const codice = document.getElementById("code").value.trim();

    document.getElementById("step1").classList.add("hidden");

    if(codice === codiceBloccato){
        document.getElementById("blockStep").classList.remove("hidden");
    } else {
        document.getElementById("okStep").classList.remove("hidden");
    }
}

function startCheck(){
    document.getElementById("blockStep").classList.add("hidden");
    document.getElementById("checkStep").classList.remove("hidden");
    nuovaDomanda();
}

function nuovaDomanda(){
    domandaCorrente = domande[Math.floor(Math.random()*domande.length)];
    document.getElementById("domanda").innerText = domandaCorrente.q;
    document.getElementById("risposta").value = "";
}

function verificaRisposta(){
    tentativo++;
    const risposta = document.getElementById("risposta").value.trim().toLowerCase();

    document.getElementById("tentativi").innerText =
        "Tentativi effettuati: " + tentativo;

    // anche se giusto, i primi tentativi falliscono apposta
    if(tentativo < 4 || risposta !== domandaCorrente.a){
        alert("‚ùå Verifica non superata. Riprovare.");
        nuovaDomanda();
    } else {
        document.getElementById("checkStep").classList.add("hidden");
        document.getElementById("finalStep").classList.remove("hidden");
    }
}
</script>

</body>
</html>
